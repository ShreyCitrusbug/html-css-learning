// jQuery Methods
$(document).ready(function () {
  $("form").submit(function (e) {
    e.preventDefault();
    var first = $("#fname").val();
    var email = $("#email").val();
    var phone = $("#phone").val();

    console.log(first);
    console.log(email);
    console.log(phone);

    if (first && email && phone) {
      $(".table-data tbody").append(
        "<tr tbl-fname='" +
          first +
          "' tbl-email='" +
          email +
          "' tbl-phone='" +
          phone +
          "'><td>" +
          first +
          "</td><td>" +
          email +
          "</td><td>" +
          phone +
          "</td><td><button class='btn-del' type='button'>Delete</button><button class='btn-edit' type='button'>Edit</button></td></tr>"
      );
    }
    $("input[name='']").val("");
  });

  $("body").on("click", ".btn-del", function () {
    $(this).parents("tr").remove();
  });

  $("body").on("click", ".btn-edit", function () {
    var fname = $(this).parents("tr").attr("tbl-fname");
    var email = $(this).parents("tr").attr("tbl-email");
    var phone = $(this).parents("tr").attr("tbl-phone");

    $(this)
      .parents("tr")
      .find("td:eq(0)")
      .html("<input fname=update-fname value='" + fname + "'>");
    $(this)
      .parents("tr")
      .find("td:eq(1)")
      .html("<input email=update-email value='" + email + "'>");
    $(this)
      .parents("tr")
      .find("td:eq(2)")
      .html("<input phone=update-phone value='" + phone + "'>");

    $(this)
      .parents("tr")
      .find("td:eq(3)")
      .prepend("<button class='btn-update'>Update</button>");
    $(this).hide();
  });

  $("body").on("click", ".btn-update", function () {
    var fname = $(this).parents("tr").find("input[name='update-fname']").val();
    var email = $(this).parents("tr").find("input[email='update-email']").val();
    var phone = $(this).parents("tr").find("input[phone='update-phone']").val();

    $(this).parents("tr").find("td:eq(0)").text(fname);
    $(this).parents("tr").find("td:eq(1)").text(email);
    $(this).parents("tr").find("td:eq(2)").text(phone);

    $(this).parents("tr").attr("tbl-fname", fname);
    $(this).parents("tr").attr("tbl-email", email);
    $(this).parents("tr").attr("tbl-phone", phone);
  });

  $(".add-btn").click(function (e) {
    e.preventDefault();
    $(".form-row").append(
      "<div class='email-field'><label>Email-Id:<br/></label><br/><input type='email' name='mail' placeholder='*Enter Your Email-Id'><button class='remove-btn'>-</button></div>"
    );
  });
  $("body").on("click", ".remove-btn", function (e) {
    e.preventDefault();
    $(this).parents(".email-field").remove();
  });

  $("body").on("click", ".submit-btn", function () {
    var email = document.getElementsByName("mail");
    let e = "";
    for (let i = 0; i < email.length; i++) {
      e += i + 1 + " " + email[i].value + "\n";
    }
    alert(e);
  });
});
